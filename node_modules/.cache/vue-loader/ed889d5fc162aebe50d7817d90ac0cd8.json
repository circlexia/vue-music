{"remainingRequest":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/circle/Desktop/vue-music/src/components/playlist/playlist.vue?vue&type=style&index=0&id=49f7be0f&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&","dependencies":[{"path":"/Users/circle/Desktop/vue-music/src/components/playlist/playlist.vue","mtime":1574170630925},{"path":"/Users/circle/Desktop/vue-music/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/circle/Desktop/vue-music/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~common/stylus/variable\"\n@import \"~common/stylus/mixin\"\n\n.playlist\n  position: fixed\n  left: 0\n  right: 0\n  top: 0\n  bottom: 0\n  z-index: 200\n  background-color: $color-background-d\n  &.list-fade-enter-active, &.list-fade-leave-active\n    transition: opacity 0.3s\n    .list-wrapper\n      transition: all 0.3s\n  &.list-fade-enter, &.list-fade-leave-to\n    opacity: 0\n    .list-wrapper\n      transform: translate3d(0, 100%, 0)\n  &.list-fade-enter\n  .list-wrapper\n    position: absolute\n    left: 0\n    bottom: 0\n    width: 100%\n    background-color: $color-highlight-background\n    .list-header\n      position: relative\n      padding: 20px 30px 10px 20px\n      .title\n        display: flex\n        align-items: center\n        .icon\n          margin-right: 10px\n          font-size: 30px\n          color: $color-theme-d\n        .text\n          flex: 1\n          font-size: $font-size-medium\n          color: $color-text-l\n        .clear\n          extend-click()\n          .icon-clear\n            font-size: $font-size-medium\n            color: $color-text-d\n    .list-content\n      max-height: 240px\n      overflow: hidden\n      .item\n        display: flex\n        align-items: center\n        height: 40px\n        padding: 0 30px 0 20px\n        overflow: hidden\n        &.list-enter-active, &.list-leave-active\n          transition: all 0.1s\n        &.list-enter, &.list-leave-to\n          height: 0\n        .current\n          flex: 0 0 20px\n          width: 20px\n          font-size: $font-size-small\n          color: $color-theme-d\n        .text\n          flex: 1\n          no-wrap()\n          font-size: $font-size-medium\n          color: $color-text-d\n        .like\n          extend-click()\n          margin-right: 15px\n          font-size: $font-size-small\n          color: $color-theme\n          .icon-favorite\n            color: $color-sub-theme\n        .delete\n          extend-click()\n          font-size: $font-size-small\n          color: $color-theme\n    .list-operate\n      width: 140px\n      margin: 20px auto 30px auto\n      .add\n        display: flex\n        align-items: center\n        padding: 8px 16px\n        border: 1px solid $color-text-l\n        border-radius: 100px\n        color: $color-text-l\n        .icon-add\n          margin-right: 5px\n          font-size: $font-size-small-s\n        .text\n          font-size: $font-size-small\n    .list-close\n      text-align: center\n      line-height: 50px\n      background: $color-background\n      font-size: $font-size-medium-x\n      color: $color-text-l\n",{"version":3,"sources":["playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"playlist.vue","sourceRoot":"src/components/playlist","sourcesContent":["<template>\n  <transition name=\"list-fade\">\n    <div class=\"playlist\" @click=\"hide\" v-show=\"showFlag\">\n      <div class=\"list-wrapper\" @click.stop>\n        <div class=\"list-header\">\n          <h1 class=\"title\">\n            <i class=\"icon\" :class=\"iconMode\" @click=\"changeMode\"></i>\n            <span class=\"text\">{{modeText}}</span>\n            <span class=\"clear\" @click=\"showConfirm\"><i class=\"icon-clear\"></i></span>\n          </h1>\n        </div>\n        <scroll ref=\"listContent\" :data=\"sequenceList\" class=\"list-content\" :refreshDelay=\"refreshDelay\">\n          <transition-group ref=\"list\" name=\"list\" tag=\"ul\">\n            <li :key=\"item.id\" class=\"item\" v-for=\"(item,index) in sequenceList\"\n                @click=\"selectItem(item,index)\">\n              <i class=\"current\" :class=\"getCurrentIcon(item)\"></i>\n              <span class=\"text\" v-html=\"item.name\"></span>\n              <span @click.stop=\"toggleFavorite(item)\" class=\"like\">\n                <i :class=\"getFavoriteIcon(item)\"></i>\n              </span>\n              <span @click.stop=\"deleteOne(item)\" class=\"delete\">\n                <i class=\"icon-delete\"></i>\n              </span>\n            </li>\n          </transition-group>\n        </scroll>\n        <div class=\"list-operate\">\n          <div @click=\"addSong\" class=\"add\">\n            <i class=\"icon-add\"></i>\n            <span class=\"text\">添加歌曲到队列</span>\n          </div>\n        </div>\n        <div @click=\"hide\" class=\"list-close\">\n          <span>关闭</span>\n        </div>\n      </div>\n      <confirm ref=\"confirm\" @confirm=\"confirmClear\" text=\"是否清空播放列表\" confirmBtnText=\"清空\"></confirm>\n      <add-song ref=\"addSong\"></add-song>\n    </div>\n  </transition>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import { mapActions } from 'vuex'\n  import { playMode } from 'common/js/config'\n  import Scroll from 'base/scroll/scroll'\n  import Confirm from 'base/confirm/confirm'\n  import AddSong from 'components/add-song/add-song'\n  import { playerMixin } from 'common/js/mixin'\n\n  export default {\n    mixins: [playerMixin],\n    data () {\n      return {\n        showFlag: false,\n        refreshDelay: 120\n      }\n    },\n    computed: {\n      modeText () {\n        return this.mode === playMode.sequence ? '顺序播放' : this.mode === playMode.random ? '随机播放' : '单曲循环'\n      }\n    },\n    methods: {\n      show () {\n        this.showFlag = true\n        setTimeout(() => {\n          this.$refs.listContent.refresh()\n          this.scrollToCurrent(this.currentSong)\n        }, 20)\n      },\n      hide () {\n        this.showFlag = false\n      },\n      showConfirm () {\n        this.$refs.confirm.show()\n      },\n      confirmClear () {\n        this.deleteSongList()\n        this.hide()\n      },\n      getCurrentIcon (item) {\n        if (this.currentSong.id === item.id) {\n          return 'icon-play'\n        }\n        return ''\n      },\n      selectItem (item, index) {\n        if (this.mode === playMode.random) {\n          index = this.playlist.findIndex((song) => {\n            return song.id === item.id\n          })\n        }\n        this.setCurrentIndex(index)\n        this.setPlayingState(true)\n      },\n      scrollToCurrent (current) {\n        const index = this.sequenceList.findIndex((song) => {\n          return current.id === song.id\n        })\n        this.$refs.listContent.scrollToElement(this.$refs.list.$el.children[index], 300)\n      },\n      deleteOne (item) {\n        if (item.deleting) {\n          return\n        }\n        item.deleting = true\n        this.deleteSong(item)\n        if (!this.playlist.length) {\n          this.hide()\n        }\n        setTimeout(() => {\n          item.deleting = false\n        }, 300)\n      },\n      addSong () {\n        this.$refs.addSong.show()\n      },\n      ...mapActions([\n        'deleteSong',\n        'deleteSongList'\n      ])\n    },\n    watch: {\n      currentSong (newSong, oldSong) {\n        if (!this.showFlag || newSong.id === oldSong.id) {\n          return\n        }\n        setTimeout(() => {\n          this.scrollToCurrent(newSong)\n        }, 20)\n      }\n    },\n    components: {\n      Scroll,\n      Confirm,\n      AddSong\n    }\n  }\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @import \"~common/stylus/variable\"\n  @import \"~common/stylus/mixin\"\n\n  .playlist\n    position: fixed\n    left: 0\n    right: 0\n    top: 0\n    bottom: 0\n    z-index: 200\n    background-color: $color-background-d\n    &.list-fade-enter-active, &.list-fade-leave-active\n      transition: opacity 0.3s\n      .list-wrapper\n        transition: all 0.3s\n    &.list-fade-enter, &.list-fade-leave-to\n      opacity: 0\n      .list-wrapper\n        transform: translate3d(0, 100%, 0)\n    &.list-fade-enter\n    .list-wrapper\n      position: absolute\n      left: 0\n      bottom: 0\n      width: 100%\n      background-color: $color-highlight-background\n      .list-header\n        position: relative\n        padding: 20px 30px 10px 20px\n        .title\n          display: flex\n          align-items: center\n          .icon\n            margin-right: 10px\n            font-size: 30px\n            color: $color-theme-d\n          .text\n            flex: 1\n            font-size: $font-size-medium\n            color: $color-text-l\n          .clear\n            extend-click()\n            .icon-clear\n              font-size: $font-size-medium\n              color: $color-text-d\n      .list-content\n        max-height: 240px\n        overflow: hidden\n        .item\n          display: flex\n          align-items: center\n          height: 40px\n          padding: 0 30px 0 20px\n          overflow: hidden\n          &.list-enter-active, &.list-leave-active\n            transition: all 0.1s\n          &.list-enter, &.list-leave-to\n            height: 0\n          .current\n            flex: 0 0 20px\n            width: 20px\n            font-size: $font-size-small\n            color: $color-theme-d\n          .text\n            flex: 1\n            no-wrap()\n            font-size: $font-size-medium\n            color: $color-text-d\n          .like\n            extend-click()\n            margin-right: 15px\n            font-size: $font-size-small\n            color: $color-theme\n            .icon-favorite\n              color: $color-sub-theme\n          .delete\n            extend-click()\n            font-size: $font-size-small\n            color: $color-theme\n      .list-operate\n        width: 140px\n        margin: 20px auto 30px auto\n        .add\n          display: flex\n          align-items: center\n          padding: 8px 16px\n          border: 1px solid $color-text-l\n          border-radius: 100px\n          color: $color-text-l\n          .icon-add\n            margin-right: 5px\n            font-size: $font-size-small-s\n          .text\n            font-size: $font-size-small\n      .list-close\n        text-align: center\n        line-height: 50px\n        background: $color-background\n        font-size: $font-size-medium-x\n        color: $color-text-l\n</style>\n"]}]}