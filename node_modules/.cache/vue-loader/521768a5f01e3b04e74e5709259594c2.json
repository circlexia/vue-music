{"remainingRequest":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/circle/Desktop/vue-music/src/components/recommend/recommend.vue?vue&type=style&index=0&id=0867ecc9&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&","dependencies":[{"path":"/Users/circle/Desktop/vue-music/src/components/recommend/recommend.vue","mtime":1574170630926},{"path":"/Users/circle/Desktop/vue-music/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Users/circle/Desktop/vue-music/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \"~common/stylus/variable\"\n\n.recommend\n  position: fixed\n  width: 100%\n  top: 88px\n  bottom: 0\n  .recommend-content\n    height: 100%\n    overflow: hidden\n    .slider-wrapper\n      position: relative\n      width: 100%\n      height: 0\n      padding-top: 40%\n      overflow: hidden\n      .slider-content\n        position: absolute\n        top: 0\n        left: 0\n        width: 100%\n        height: 100%\n    .recommend-list\n      .list-title\n        height: 65px\n        line-height: 65px\n        text-align: center\n        font-size: $font-size-medium\n        color: $color-theme\n      .item\n        display: flex\n        box-sizing: border-box\n        align-items: center\n        padding: 0 20px 20px 20px\n        .icon\n          flex: 0 0 60px\n          width: 60px\n          padding-right: 20px\n        .text\n          display: flex\n          flex-direction: column\n          justify-content: center\n          flex: 1\n          line-height: 20px\n          overflow: hidden\n          font-size: $font-size-medium\n          .name\n            margin-bottom: 10px\n            color: $color-text\n          .desc\n            color: $color-text-d\n    .loading-container\n      position: absolute\n      width: 100%\n      top: 50%\n      transform: translateY(-50%)\n",{"version":3,"sources":["recommend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"recommend.vue","sourceRoot":"src/components/recommend","sourcesContent":["<template>\n  <div class=\"recommend\" ref=\"recommend\">\n    <scroll ref=\"scroll\" class=\"recommend-content\" :data=\"discList\">\n      <div>\n        <div v-if=\"recommends.length\" class=\"slider-wrapper\">\n          <div class=\"slider-content\">\n            <slider ref=\"slider\">\n              <div v-for=\"(item,index) in recommends\" :key=\"index\">\n                <a :href=\"item.linkUrl\">\n                  <img @load=\"loadImage\" :src=\"item.picUrl\">\n                </a>\n              </div>\n            </slider>\n          </div>\n        </div>\n        <div class=\"recommend-list\">\n          <h1 class=\"list-title\">热门歌单推荐</h1>\n          <ul>\n            <li @click=\"selectItem(item)\" v-for=\"(item,index) in discList\" class=\"item\" :key=\"index\">\n              <div class=\"icon\">\n                <img width=\"60\" height=\"60\" v-lazy=\"item.imgurl\">\n              </div>\n              <div class=\"text\">\n                <h2 class=\"name\" v-html=\"item.creator.name\"></h2>\n                <p class=\"desc\" v-html=\"item.dissname\"></p>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"loading-container\" v-show=\"!discList.length\">\n        <loading></loading>\n      </div>\n    </scroll>\n    <router-view></router-view>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import Slider from 'base/slider/slider'\n  import Loading from 'base/loading/loading'\n  import Scroll from 'base/scroll/scroll'\n  import { getRecommend, getDiscList } from 'api/recommend'\n  import { playlistMixin } from 'common/js/mixin'\n  import { ERR_OK } from 'api/config'\n  import { mapMutations } from 'vuex'\n\n  export default {\n    mixins: [playlistMixin],\n    data () {\n      return {\n        recommends: [],\n        discList: []\n      }\n    },\n    created () {\n      this._getRecommend()\n\n      this._getDiscList()\n    },\n    activated () {\n      setTimeout(() => {\n        this.$refs.slider && this.$refs.slider.refresh()\n      }, 20)\n    },\n    methods: {\n      handlePlaylist (playlist) {\n        const bottom = playlist.length > 0 ? '60px' : ''\n\n        this.$refs.recommend.style.bottom = bottom\n        this.$refs.scroll.refresh()\n      },\n      loadImage () {\n        if (!this.checkloaded) {\n          this.checkloaded = true\n          setTimeout(() => {\n            this.$refs.scroll.refresh()\n          }, 20)\n        }\n      },\n      selectItem (item) {\n        this.$router.push({\n          path: `/recommend/${item.dissid}`\n        })\n        this.setDisc(item)\n      },\n      _getRecommend () {\n        getRecommend().then((res) => {\n          if (res.code === ERR_OK) {\n            this.recommends = res.data.slider\n          }\n        })\n      },\n      _getDiscList () {\n        getDiscList().then((res) => {\n          if (res.code === ERR_OK) {\n            this.discList = res.data.list\n          }\n        })\n      },\n      ...mapMutations({\n        setDisc: 'SET_DISC'\n      })\n    },\n    components: {\n      Slider,\n      Loading,\n      Scroll\n    }\n  }\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @import \"~common/stylus/variable\"\n\n  .recommend\n    position: fixed\n    width: 100%\n    top: 88px\n    bottom: 0\n    .recommend-content\n      height: 100%\n      overflow: hidden\n      .slider-wrapper\n        position: relative\n        width: 100%\n        height: 0\n        padding-top: 40%\n        overflow: hidden\n        .slider-content\n          position: absolute\n          top: 0\n          left: 0\n          width: 100%\n          height: 100%\n      .recommend-list\n        .list-title\n          height: 65px\n          line-height: 65px\n          text-align: center\n          font-size: $font-size-medium\n          color: $color-theme\n        .item\n          display: flex\n          box-sizing: border-box\n          align-items: center\n          padding: 0 20px 20px 20px\n          .icon\n            flex: 0 0 60px\n            width: 60px\n            padding-right: 20px\n          .text\n            display: flex\n            flex-direction: column\n            justify-content: center\n            flex: 1\n            line-height: 20px\n            overflow: hidden\n            font-size: $font-size-medium\n            .name\n              margin-bottom: 10px\n              color: $color-text\n            .desc\n              color: $color-text-d\n      .loading-container\n        position: absolute\n        width: 100%\n        top: 50%\n        transform: translateY(-50%)\n</style>\n"]}]}