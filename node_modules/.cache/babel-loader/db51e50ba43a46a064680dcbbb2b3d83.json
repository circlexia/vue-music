{"remainingRequest":"/Users/circle/Desktop/vue-music/node_modules/babel-loader/lib/index.js!/Users/circle/Desktop/vue-music/node_modules/eslint-loader/index.js??ref--13-0!/Users/circle/Desktop/vue-music/src/common/js/cache.js","dependencies":[{"path":"/Users/circle/Desktop/vue-music/src/common/js/cache.js","mtime":1574170630922},{"path":"/Users/circle/Desktop/vue-music/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport storage from 'good-storage';\nvar SEARCH_KEY = '__search__';\nvar SEARCH_MAX_LEN = 15;\nvar PLAY_KEY = '__play__';\nvar PLAY_MAX_LEN = 200;\nvar FAVORITE_KEY = '__favorite__';\nvar FAVORITE_MAX_LEN = 200;\n\nfunction insertArray(arr, val, compare, maxLen) {\n  var index = arr.findIndex(compare);\n\n  if (index === 0) {\n    return;\n  }\n\n  if (index > 0) {\n    arr.splice(index, 1);\n  }\n\n  arr.unshift(val);\n\n  if (maxLen && arr.length > maxLen) {\n    arr.pop();\n  }\n}\n\nfunction deleteFromArray(arr, compare) {\n  var index = arr.findIndex(compare);\n\n  if (index > -1) {\n    arr.splice(index, 1);\n  }\n}\n\nexport function saveSearch(query) {\n  var searches = storage.get(SEARCH_KEY, []);\n  insertArray(searches, query, function (item) {\n    return item === query;\n  }, SEARCH_MAX_LEN);\n  storage.set(SEARCH_KEY, searches);\n  return searches;\n}\nexport function deleteSearch(query) {\n  var searches = storage.get(SEARCH_KEY, []);\n  deleteFromArray(searches, function (item) {\n    return item === query;\n  });\n  storage.set(SEARCH_KEY, searches);\n  return searches;\n}\nexport function clearSearch() {\n  storage.remove(SEARCH_KEY);\n  return [];\n}\nexport function loadSearch() {\n  return storage.get(SEARCH_KEY, []);\n}\nexport function savePlay(song) {\n  var songs = storage.get(PLAY_KEY, []);\n  insertArray(songs, song, function (item) {\n    return song.id === item.id;\n  }, PLAY_MAX_LEN);\n  storage.set(PLAY_KEY, songs);\n  return songs;\n}\nexport function loadPlay() {\n  return storage.get(PLAY_KEY, []);\n}\nexport function saveFavorite(song) {\n  var songs = storage.get(FAVORITE_KEY, []);\n  insertArray(songs, song, function (item) {\n    return song.id === item.id;\n  }, FAVORITE_MAX_LEN);\n  storage.set(FAVORITE_KEY, songs);\n  return songs;\n}\nexport function deleteFavorite(song) {\n  var songs = storage.get(FAVORITE_KEY, []);\n  deleteFromArray(songs, function (item) {\n    return item.id === song.id;\n  });\n  storage.set(FAVORITE_KEY, songs);\n  return songs;\n}\nexport function loadFavorite() {\n  return storage.get(FAVORITE_KEY, []);\n}",{"version":3,"sources":["/Users/circle/Desktop/vue-music/src/common/js/cache.js"],"names":["storage","SEARCH_KEY","SEARCH_MAX_LEN","PLAY_KEY","PLAY_MAX_LEN","FAVORITE_KEY","FAVORITE_MAX_LEN","insertArray","arr","val","compare","maxLen","index","findIndex","splice","unshift","length","pop","deleteFromArray","saveSearch","query","searches","get","item","set","deleteSearch","clearSearch","remove","loadSearch","savePlay","song","songs","id","loadPlay","saveFavorite","deleteFavorite","loadFavorite"],"mappings":"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","sourcesContent":["import storage from 'good-storage'\n\nconst SEARCH_KEY = '__search__'\nconst SEARCH_MAX_LEN = 15\n\nconst PLAY_KEY = '__play__'\nconst PLAY_MAX_LEN = 200\n\nconst FAVORITE_KEY = '__favorite__'\nconst FAVORITE_MAX_LEN = 200\n\nfunction insertArray (arr, val, compare, maxLen) {\n  const index = arr.findIndex(compare)\n  if (index === 0) {\n    return\n  }\n  if (index > 0) {\n    arr.splice(index, 1)\n  }\n  arr.unshift(val)\n  if (maxLen && arr.length > maxLen) {\n    arr.pop()\n  }\n}\n\nfunction deleteFromArray (arr, compare) {\n  const index = arr.findIndex(compare)\n  if (index > -1) {\n    arr.splice(index, 1)\n  }\n}\n\nexport function saveSearch (query) {\n  let searches = storage.get(SEARCH_KEY, [])\n  insertArray(searches, query, (item) => {\n    return item === query\n  }, SEARCH_MAX_LEN)\n  storage.set(SEARCH_KEY, searches)\n  return searches\n}\n\nexport function deleteSearch (query) {\n  let searches = storage.get(SEARCH_KEY, [])\n  deleteFromArray(searches, (item) => {\n    return item === query\n  })\n  storage.set(SEARCH_KEY, searches)\n  return searches\n}\n\nexport function clearSearch () {\n  storage.remove(SEARCH_KEY)\n  return []\n}\n\nexport function loadSearch () {\n  return storage.get(SEARCH_KEY, [])\n}\n\nexport function savePlay (song) {\n  let songs = storage.get(PLAY_KEY, [])\n  insertArray(songs, song, (item) => {\n    return song.id === item.id\n  }, PLAY_MAX_LEN)\n  storage.set(PLAY_KEY, songs)\n  return songs\n}\n\nexport function loadPlay () {\n  return storage.get(PLAY_KEY, [])\n}\n\nexport function saveFavorite (song) {\n  let songs = storage.get(FAVORITE_KEY, [])\n  insertArray(songs, song, (item) => {\n    return song.id === item.id\n  }, FAVORITE_MAX_LEN)\n  storage.set(FAVORITE_KEY, songs)\n  return songs\n}\n\nexport function deleteFavorite (song) {\n  let songs = storage.get(FAVORITE_KEY, [])\n  deleteFromArray(songs, (item) => {\n    return item.id === song.id\n  })\n  storage.set(FAVORITE_KEY, songs)\n  return songs\n}\n\nexport function loadFavorite () {\n  return storage.get(FAVORITE_KEY, [])\n}\n"]}]}