{"remainingRequest":"/Users/circle/Desktop/vue-music/node_modules/babel-loader/lib/index.js!/Users/circle/Desktop/vue-music/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/circle/Desktop/vue-music/src/base/progress-bar/progress-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/circle/Desktop/vue-music/src/base/progress-bar/progress-bar.vue","mtime":1574170630919},{"path":"/Users/circle/Desktop/vue-music/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/circle/Desktop/vue-music/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { prefixStyle } from 'common/js/dom';\nvar progressBtnWidth = 16;\nvar transform = prefixStyle('transform');\nexport default {\n  props: {\n    percent: {\n      type: Number,\n      default: 0\n    }\n  },\n  created: function created() {\n    this.touch = {};\n  },\n  methods: {\n    progressTouchStart: function progressTouchStart(e) {\n      this.touch.initiated = true;\n      this.touch.startX = e.touches[0].pageX;\n      this.touch.left = this.$refs.progress.clientWidth;\n    },\n    progressTouchMove: function progressTouchMove(e) {\n      if (!this.touch.initiated) {\n        return;\n      }\n\n      var deltaX = e.touches[0].pageX - this.touch.startX;\n      var offsetWidth = Math.min(this.$refs.progressBar.clientWidth - progressBtnWidth, Math.max(0, this.touch.left + deltaX));\n\n      this._offset(offsetWidth);\n\n      this.$emit('percentChanging', this._getPercent());\n    },\n    progressTouchEnd: function progressTouchEnd() {\n      this.touch.initiated = false;\n\n      this._triggerPercent();\n    },\n    progressClick: function progressClick(e) {\n      var rect = this.$refs.progressBar.getBoundingClientRect();\n      var offsetWidth = e.pageX - rect.left;\n\n      this._offset(offsetWidth); // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\n      // this._offset(e.offsetX)\n\n\n      this._triggerPercent();\n    },\n    setProgressOffset: function setProgressOffset(percent) {\n      if (percent >= 0 && !this.touch.initiated) {\n        var barWidth = this.$refs.progressBar.clientWidth - progressBtnWidth;\n        var offsetWidth = percent * barWidth;\n\n        this._offset(offsetWidth);\n      }\n    },\n    _triggerPercent: function _triggerPercent() {\n      this.$emit('percentChange', this._getPercent());\n    },\n    _offset: function _offset(offsetWidth) {\n      this.$refs.progress.style.width = \"\".concat(offsetWidth, \"px\");\n      this.$refs.progressBtn.style[transform] = \"translate3d(\".concat(offsetWidth, \"px,0,0)\");\n    },\n    _getPercent: function _getPercent() {\n      var barWidth = this.$refs.progressBar.clientWidth - progressBtnWidth;\n      return this.$refs.progress.clientWidth / barWidth;\n    }\n  },\n  watch: {\n    percent: function percent(newPercent) {\n      this.setProgressOffset(newPercent);\n    }\n  }\n};",{"version":3,"sources":["progress-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA,SAAA,WAAA,QAAA,eAAA;AAEA,IAAA,gBAAA,GAAA,EAAA;AACA,IAAA,SAAA,GAAA,WAAA,CAAA,WAAA,CAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,OAPA,qBAOA;AACA,SAAA,KAAA,GAAA,EAAA;AACA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,8BACA,CADA,EACA;AACA,WAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,EAAA,KAAA;AACA,WAAA,KAAA,CAAA,IAAA,GAAA,KAAA,KAAA,CAAA,QAAA,CAAA,WAAA;AACA,KALA;AAMA,IAAA,iBANA,6BAMA,CANA,EAMA;AACA,UAAA,CAAA,KAAA,KAAA,CAAA,SAAA,EAAA;AACA;AACA;;AACA,UAAA,MAAA,GAAA,CAAA,CAAA,OAAA,CAAA,CAAA,EAAA,KAAA,GAAA,KAAA,KAAA,CAAA,MAAA;AACA,UAAA,WAAA,GAAA,IAAA,CAAA,GAAA,CAAA,KAAA,KAAA,CAAA,WAAA,CAAA,WAAA,GAAA,gBAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,IAAA,GAAA,MAAA,CAAA,CAAA;;AACA,WAAA,OAAA,CAAA,WAAA;;AACA,WAAA,KAAA,CAAA,iBAAA,EAAA,KAAA,WAAA,EAAA;AACA,KAdA;AAeA,IAAA,gBAfA,8BAeA;AACA,WAAA,KAAA,CAAA,SAAA,GAAA,KAAA;;AACA,WAAA,eAAA;AACA,KAlBA;AAmBA,IAAA,aAnBA,yBAmBA,CAnBA,EAmBA;AACA,UAAA,IAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,qBAAA,EAAA;AACA,UAAA,WAAA,GAAA,CAAA,CAAA,KAAA,GAAA,IAAA,CAAA,IAAA;;AACA,WAAA,OAAA,CAAA,WAAA,EAHA,CAIA;AACA;;;AACA,WAAA,eAAA;AACA,KA1BA;AA2BA,IAAA,iBA3BA,6BA2BA,OA3BA,EA2BA;AACA,UAAA,OAAA,IAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,SAAA,EAAA;AACA,YAAA,QAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,WAAA,GAAA,gBAAA;AACA,YAAA,WAAA,GAAA,OAAA,GAAA,QAAA;;AACA,aAAA,OAAA,CAAA,WAAA;AACA;AACA,KAjCA;AAkCA,IAAA,eAlCA,6BAkCA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,KAAA,WAAA,EAAA;AACA,KApCA;AAqCA,IAAA,OArCA,mBAqCA,WArCA,EAqCA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,aAAA,WAAA;AACA,WAAA,KAAA,CAAA,WAAA,CAAA,KAAA,CAAA,SAAA,0BAAA,WAAA;AACA,KAxCA;AAyCA,IAAA,WAzCA,yBAyCA;AACA,UAAA,QAAA,GAAA,KAAA,KAAA,CAAA,WAAA,CAAA,WAAA,GAAA,gBAAA;AACA,aAAA,KAAA,KAAA,CAAA,QAAA,CAAA,WAAA,GAAA,QAAA;AACA;AA5CA,GAVA;AAwDA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,mBACA,UADA,EACA;AACA,WAAA,iBAAA,CAAA,UAAA;AACA;AAHA;AAxDA,CAAA","sourcesContent":["<template>\n  <div class=\"progress-bar\" ref=\"progressBar\" @click=\"progressClick\">\n    <div class=\"bar-inner\">\n      <div class=\"progress\" ref=\"progress\"></div>\n      <div class=\"progress-btn-wrapper\" ref=\"progressBtn\"\n           @touchstart.prevent=\"progressTouchStart\"\n           @touchmove.prevent=\"progressTouchMove\"\n           @touchend=\"progressTouchEnd\"\n      >\n        <div class=\"progress-btn\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import { prefixStyle } from 'common/js/dom'\n\n  const progressBtnWidth = 16\n  const transform = prefixStyle('transform')\n\n  export default {\n    props: {\n      percent: {\n        type: Number,\n        default: 0\n      }\n    },\n    created () {\n      this.touch = {}\n    },\n    methods: {\n      progressTouchStart (e) {\n        this.touch.initiated = true\n        this.touch.startX = e.touches[0].pageX\n        this.touch.left = this.$refs.progress.clientWidth\n      },\n      progressTouchMove (e) {\n        if (!this.touch.initiated) {\n          return\n        }\n        const deltaX = e.touches[0].pageX - this.touch.startX\n        const offsetWidth = Math.min(this.$refs.progressBar.clientWidth - progressBtnWidth, Math.max(0, this.touch.left + deltaX))\n        this._offset(offsetWidth)\n        this.$emit('percentChanging', this._getPercent())\n      },\n      progressTouchEnd () {\n        this.touch.initiated = false\n        this._triggerPercent()\n      },\n      progressClick (e) {\n        const rect = this.$refs.progressBar.getBoundingClientRect()\n        const offsetWidth = e.pageX - rect.left\n        this._offset(offsetWidth)\n        // 这里当我们点击 progressBtn 的时候，e.offsetX 获取不对\n        // this._offset(e.offsetX)\n        this._triggerPercent()\n      },\n      setProgressOffset (percent) {\n        if (percent >= 0 && !this.touch.initiated) {\n          const barWidth = this.$refs.progressBar.clientWidth - progressBtnWidth\n          const offsetWidth = percent * barWidth\n          this._offset(offsetWidth)\n        }\n      },\n      _triggerPercent () {\n        this.$emit('percentChange', this._getPercent())\n      },\n      _offset (offsetWidth) {\n        this.$refs.progress.style.width = `${offsetWidth}px`\n        this.$refs.progressBtn.style[transform] = `translate3d(${offsetWidth}px,0,0)`\n      },\n      _getPercent () {\n        const barWidth = this.$refs.progressBar.clientWidth - progressBtnWidth\n        return this.$refs.progress.clientWidth / barWidth\n      }\n    },\n    watch: {\n      percent (newPercent) {\n        this.setProgressOffset(newPercent)\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @import \"~common/stylus/variable\"\n\n  .progress-bar\n    height: 30px\n    .bar-inner\n      position: relative\n      top: 13px\n      height: 4px\n      background: rgba(0, 0, 0, 0.3)\n      .progress\n        position: absolute\n        height: 100%\n        background: $color-theme\n      .progress-btn-wrapper\n        position: absolute\n        left: -8px\n        top: -13px\n        width: 30px\n        height: 30px\n        .progress-btn\n          position: relative\n          top: 7px\n          left: 7px\n          box-sizing: border-box\n          width: 16px\n          height: 16px\n          border: 3px solid $color-text\n          border-radius: 50%\n          background: $color-theme\n</style>\n"],"sourceRoot":"src/base/progress-bar"}]}